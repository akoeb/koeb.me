@(currentPage: Page[Post], authUser: Option[String])(implicit flash: Flash)
@import helper._
@main("koeb.me: things I want to tell the world"){
    <p>&nbsp;</p>
    @flash.get("success").map { message =>
        <div class="success">
            <strong>Done!</strong><br/>@message
        </div>                           
    }
    @flash.get("error").map { message =>
        <div class="error">
            <strong>Error!</strong><br/>@message
        </div>
    }
    @Option(authUser).filterNot(_.isEmpty).map { user =>
    	<h2>Logged in user: @authUser.orNull</h2>
    }
    	
    @Option(currentPage.items).filterNot(_.isEmpty).map { postList =>
        @postList.map { post =>
            <h2 class="postTitle">@post.title</h2>
            <div class="postDate">Posted on @post.created.map(_.format("yyyy-MM-dd"))</div>
            <div class="postTeaser">@post.teaser</div>
            <p class="postText">@post.text</p>
            @if(authUser.isDefined) {
            <a href="@routes.Blog.editPost(post.id.get)" class="postEditLink">Modify</a>
            }
            <hr width="200">
            <br />
        }

        <div id="pagination" class="pagination">
            <ul>
                @currentPage.prev.map { page =>
                    <li class="prev">
                    <a href="@routes.Application.listPosts(page)">&larr; Newer</a>
                    </li> 
                }.getOrElse {
                    <li class="prev disabled">
                    <a>&larr; Newer</a>
                    </li>
                }
    
                
                @currentPage.next.map { page =>
                    <li class="next">
                    <a href="@routes.Application.listPosts(page)">Older &rarr;</a>
                    </li> 
                }.getOrElse {
                    <li class="next disabled">
                    <a>Older &rarr;</a>
                    </li>
                }
            </ul>
        </div>    

    }.getOrElse {
        <div class="NoPost">
            <em>No posts yet, stay tuned!</em>
        </div>
    }
}
